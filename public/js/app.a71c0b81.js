(function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-3e9e0f76":"17ae36e1","chunk-3eb2bc18":"6b702d8a"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(e);var u=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",u.name="ChunkLoadError",u.type=n,u.request=s,r[1](u)}a[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var p=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("notifications",{attrs:{duration:1e3,position:"top left",group:"error"}}),r("notifications",{attrs:{duration:1e3,position:"bottom left",group:"success"}}),r("v-main",[r("router-view")],1)],1)},s=[],o={name:"App",data:function(){return{}}},i=o,c=(r("034f"),r("2877")),u=r("6544"),l=r.n(u),p=r("7496"),d=r("f6c4"),f=Object(c["a"])(i,a,s,!1,null,null,null),m=f.exports;l()(f,{VApp:p["a"],VMain:d["a"]});r("d3b7"),r("3ca3"),r("ddb0"),r("b0c0");var g=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"col-md-5"},[r("div",{staticClass:" success"},[r("h2",{staticClass:"white--text text-center"},[e._v(" Groupe Chat youmer "),r("v-spacer"),r("v-btn",{attrs:{text:"",fab:"",height:"0",width:"0"},on:{click:e.logout}},[e._v(" "+e._s(this.$store.getters.getUserName)+" "),r("v-icon",[e._v("mdi-logout")])],1)],1)]),r("v-divider",{staticClass:"ma-2"}),r("div",{staticClass:" pa-3",staticStyle:{border:"1px solid grey",height:"100vh"}},[r("div",{staticClass:"pa-3 chat__messages",staticStyle:{height:"80%","overflow-y":"auto"}},[e._l(e.getData,(function(t,n){return r("v-card",{key:n,class:t.userId==e.$store.getters.getUserId?"pa-1 col-md-10 mt-4 float-left":"pa-1 col-md-10 float-right  mt-3 text-right red white--text",staticStyle:{"border-radius":"15px",clear:"both"},attrs:{light:""}},[r("strong",[e._v(e._s(t.user.username_u))]),r("p",[e._v(e._s(t.msgchat))]),r("span",{class:t.userId===e.$store.getters.getUserId?"float-right":"float-left",staticStyle:{"font-size":"9px"}},[r("timeago",{staticClass:"float-center grren--text",attrs:{datetime:t.createdAt,"auto-update":60}})],1)])})),e.typing?r("div",{staticClass:"ma-2 red--text"},[r("strong",[e._v(" "+e._s(e.typs)+" is typing")])]):e._e()],2),r("div",{staticClass:"messagesend "},[r("v-textarea",{staticClass:"col-md-12",attrs:{label:"tap here for send ....",rows:"1","prepend-icon":"mdi-comment"},on:{input:e.emitTyping,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void t.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.sendMessage()}},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),r("div",{staticClass:"sending"},[r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"success "},on:{click:function(t){return e.sendMessage()}}},[r("v-icon",{attrs:{dark:""}},[e._v(" mdi-send ")])],1)],1)],1)])],1)},v=[],y=r("1da1"),b=(r("4d90"),r("96cf"),{name:"Home",data:function(){return{getData:[],msg:"",typing:!1,typs:""}},sockets:{connect:function(){console.log("socket connected")},data:function(e){this.getData=e},recev:function(e){this.soundEffect.play(),this.getData.push(e)},typings:function(e){var t=this;return clearTimeout(this.timeOutId),this.typing=!0,this.typs=e.nickname,this.timeOutId=setTimeout((function(){t.typing=!1}),2e3),e}},methods:{emitTyping:function(){this.scrollBottom(),this.$socket.emit("typing",{nickname:this.$store.getters.getUserName})},logout:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("destroySession");case 2:case"end":return t.stop()}}),t)})))()},sendMessage:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Date,r=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear(),s=t.getHours(),o=t.getMinutes(),i=t.getSeconds(),t=a+"-"+n+"-"+r+" "+s+":"+o+":"+i,this.$socket.emit("add",{msgchat:this.msg,userId:this.$store.getters.getUserId,username:this.$store.getters.getUserName,createdAt:t}),this.getData.push({msgchat:this.msg,userId:this.$store.getters.getUserId,user:{username_u:this.$store.getters.getUserName},createdAt:t}),this.scrollBottom(),e.next=13,this.$http.post("/c/add",{msgchat:this.msg,userId:this.$store.getters.getUserId});case 13:c=e.sent,console.log(c),this.msg="";case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),scrollBottom:function(){var e=document.querySelector(".chat__messages");setTimeout((function(){e.scrollTop=e.scrollHeight}),0)}},beforeMount:function(){var e=this;this.scrollBottom(),this.$http.get("/c/chat",{}).then((function(t){e.getData=t.data}))}}),k=b,w=(r("cccb"),r("8336")),x=r("b0af"),S=r("a523"),_=r("ce7e"),T=r("132d"),O=r("2fa4"),C=r("a844"),$=Object(c["a"])(k,h,v,!1,null,null,null),I=$.exports;l()($,{VBtn:w["a"],VCard:x["a"],VContainer:S["a"],VDivider:_["a"],VIcon:T["a"],VSpacer:O["a"],VTextarea:C["a"]});var E=r("2f62"),j=(r("ac1f"),r("466d"),{state:{accessToken:localStorage.getItem("access_token")||"",user:JSON.parse(localStorage.getItem("user"))||{}},getters:{isLoggedIn:function(e){return!!e.accessToken&&!!e.accessToken.match(n["default"].prototype.$pattern.jwtToken)},getToken:function(e){return e.accessToken},getUserId:function(e){return e.user.id},getUserName:function(e){return e.user.username},getEmail:function(e){return e.user.email},getcreatedAt:function(e){return e.user.createdAt},getupdateAt:function(e){return e.user.updatedAt}},mutations:{AUTH_SUCCESS:function(e,t){e.accessToken=t.accessToken,e.user=t.user,console.log(t),console.log(e.accessToken),localStorage.setItem("access_token",t.accessToken),localStorage.setItem("user",JSON.stringify(t.user))},DESTROY_SESSION:function(e){localStorage.removeItem("access_token"),localStorage.removeItem("user"),e.accessToken="",e.user={}}},actions:{signIn:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){n["default"].prototype.$http.post("/auth/login",r).then(function(){var r=Object(y["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(200!==n.status||200!==n.data.code){r.next=4;break}return r.next=3,t.commit("AUTH_SUCCESS",{accessToken:n.data.token,user:n.data.user});case 3:e(n);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){a(e)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),signUp:function(e,t){return new Promise((function(e,r){n["default"].prototype.$http.post("/auth/create",t).then((function(t){e(t)})).catch((function(e){r(e)}))}))},destroySession:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("DESTROY_SESSION"),e.next=3,U.push({name:"Login"});case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),handleNotFound:function(){return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.push({name:"NotFound"});case 2:case"end":return e.stop()}}),e)})))()}},modules:{}});n["default"].use(E["a"]);var R=new E["a"].Store({modules:{Auth:j}});n["default"].use(g["a"]);var A=[{path:"/",name:"Home",component:I,meta:{authRequired:!0,title:"users"}},{path:"/login",name:"Login",component:function(){return r.e("chunk-3eb2bc18").then(r.bind(null,"bd01"))},meta:{authRequired:!1,title:"users"}},{path:"/register",name:"Register",component:function(){return r.e("chunk-3e9e0f76").then(r.bind(null,"6634"))},meta:{authRequired:!1,title:"users"}}],F=new g["a"]({mode:"history",base:"/",routes:A});F.afterEach((function(e){n["default"].nextTick((function(){document.title=e.meta.title||"welcome to spameur"}))})),F.beforeEach((function(e,t,r){if(e.matched.some((function(e){return e.meta.authRequired}))){if(R.getters.isLoggedIn)return void r();r({name:"Login",params:e.params,query:{nextPath:e.name}})}else e.matched.some((function(e){return e.meta.global}))?r():R.getters.isLoggedIn?r({name:"Home"}):r()}));var U=F,D=r("bc3a"),P=r.n(D);P.a.defaults.baseURL="https://chat.sp0meur.com",P.a.defaults.validateStatus=function(e){return e>=200&&e<399},P.a.interceptors.request.use(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.getters.getToken;case 2:if(r=e.sent,a=R.getters.isLoggedIn,!0!==a){e.next=9;break}return t.headers.common["x-auth-token"]=r,e.abrupt("return",t);case 9:return!0===a&&(R.dispatch("destroySession"),n["default"].prototype.$notify({group:"errors",type:"error",title:"token is expird",text:"destroySession "})),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),P.a.interceptors.response.use((function(e){return e}),(function(e){return e.response||n["default"].prototype.$notify({group:"errors",type:"error",title:"problem in server",text:"problem in server try again"}),Promise.reject(e)})),n["default"].prototype.$http=P.a;var z={objectId:/^[a-fA-F0-9]{24}$/,username:/^[a-z0-9_-]{4,16}$/,jwtToken:/^[A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*$/,password:/(?=.*[a-z])(?=(.*[a-z]))(?=(.*)).{8,}/,passwords:/(?=(.*[0-9]))(?=.*[!@#$%^&*()\\[\]{}\-_+=~`|:;"'<>,./?])(?=.*[a-z])(?=(.*[A-Z]))(?=(.*)).{8,}/,email:/^([a-z0-9_.+-]+)@([\da-z.-]+)\.([a-z.]{2,6})$/},M=r("ce5b"),N=r.n(M);r("bf40");n["default"].use(N.a);var K={},L=new N.a({opts:K,rtl:!1,theme:{dark:!0,themes:{light:{primary:"#008DBD",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",miro:"#e8e8e8",colo:"#1E1E1E"},dark:{primary:"#008DBD",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",miro:"#1E1E1E",colo:"#e8e8e8"}}}}),B=r("8682"),V=r("ee98"),q=r.n(V),H=r("8e27"),J=r.n(H),Z=r("5132"),Y=r.n(Z);n["default"].use(new Y.a({debug:!0,connection:J()("https://chat.sp0meur.com",{transports:["websocket","polling"]}),vuex:{store:R,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),n["default"].use(B["a"],{name:"timeago",locales:{en:r("52cf"),ar:r("1034")}}),n["default"].prototype.soundEffect=new Audio("https://static.xx.fbcdn.net/rsrc.php/yy/r/XFhtdTsftOC.ogg"),n["default"].use(q.a),n["default"].config.productionTip=!1,n["default"].prototype.$pattern=z,new n["default"]({router:U,store:R,vuetify:L,render:function(e){return e(m)}}).$mount("#app")},"5ced":function(e,t,r){},"85ec":function(e,t,r){},cccb:function(e,t,r){"use strict";r("5ced")}});
//# sourceMappingURL=app.a71c0b81.js.map